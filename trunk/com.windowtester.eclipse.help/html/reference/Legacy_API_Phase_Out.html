<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content=
"text/html; charset=us-ascii" />
<title>Legacy API Phase Out</title>
<link rel="stylesheet" type="text/css" href=
"../../stylesheets/book.css" />
</head>
<body><p><h2>Legacy API Decommissioning</h2><p>This document describes our rationale and plan for decommissioning the old (or version 1.0) WindowTester Pro runtime API.</p><ol style="list-style: none;"><li><a href="#Background">Background</a></li><li><a href="#Motivation">Motivation</a></li><li><a href="#MovingForward">Moving Forward</a></li><li><a href="#Phase1RuthlessDocumentation">Phase 1: Ruthless Documentation</a><ol style="list-style: none;"><li><a href="#DeprecatedServices">Deprecated Services</a></li><li><a href="#InternalizedPackages">Internalized Packages</a></li></ol></li><li><a href="#Phase2MigrateImplementation">Phase 2: Migrate Implementation</a><ol style="list-style: none;"><li><a href="#StrategyImplementationShunts">Strategy: Implementation Shunts</a></li></ol></li><li><a href="#Phase3APIBaseline">Phase 3: API Baseline</a></li><li><a href="#Phase4LegacyCompatibilityBundles">Phase 4: Legacy Compatibility Bundles</a></li><li><a href="#Phase5Migration">Phase 5: Migration</a></li><li><a href="#MakingtheMoveEasier">Making the Move Easier</a><ol style="list-style: none;"><li><a href="#Option1RefactortoUsePreferredClasses">Option 1: Refactor to Use Preferred Classes</a></li><li><a href="#Option2AddLegacyBundleDependencies">Option 2: Add Legacy Bundle Dependencies</a></li></ol></li><li><a href="#Timeline">Timeline</a></li></ol><h3 id="Background">Background</h3><p>In March of 2007, we introduced a new and improved runtime API.  To make the transition painless we shipped the old and new APIs side-by-side in the same bundles.  For customers who have tests that mixed APIs this was key to an easy adoption.  Over time, as the new API has proven itself, the older version has become truly legacy code. Indeed, for new users of the tool, there is no reason to use it.  Unfortunately, our decision to continue to ship the legacy version means that like it or not, new users are exposed to the API creating unnecessary confusion.</p><h3 id="Motivation">Motivation</h3><p>It&#8217;s easy to feel the pain of the hybrid API. For example, suppose you are writing a test case and you want to insert a condition. Reasonable, right? The trouble comes when you go to import the ICondition interface:</p>     <img style="width: 799px; height: 215px;" src="../../images/open_type_ICondition.jpg" alt=""/><br/><p>How do you know which to import? Removing the deprecated API from the product will save the user from needing to know.</p><h3 id="MovingForward">Moving Forward</h3><p>To improve usability, we will begin teasing apart the old and new API pieces. New users will be met with a leaner API, rid of deprecated classes and interfaces. Users who still require access to the legacy API will be able to do this through an optional legacy API compatibility layer (a set of bundles). This document describes how we mean to do this.</p><p>(NOTE: legacy bundles are no longer shipped with the product as of version 5.0. The migration tooling described <a href="API_Migration.html">here</a> should remove the need for them.  If you believe you still need these bundles, please contact support and we will work with you to find a solution that best fits your needs.)</p><h3 id="Phase1RuthlessDocumentation">Phase 1: Ruthless Documentation</h3><h4 id="DeprecatedServices">Deprecated Services</h4><p>In the first phase, we will ensure that ALL deprecated API is properly tagged with the <tt>@deprecated</tt> javadoc and all deprecated packages are marked as deprecated in their package summaries.  </p><p>A summary of deprecated API can be found in the <a href="javadoc/deprecated-list.html">javadocs</a>.</p><h4 id="InternalizedPackages">Internalized Packages</h4><p>Additionally, all internal packages will be appropriately marked as such using the <code>"x-internal:=true"</code> attribute in their declaring bundle manifests.</p><h3 id="Phase2MigrateImplementation">Phase 2: Migrate Implementation</h3><p>The next step is to move existing implementations into internal packages.  To aid in migration, <i>shunt</i> classes will be left behind that maintain binary compatibility and provide documentation for making the move to the new API. </p><h4 id="StrategyImplementationShunts">Strategy: Implementation Shunts</h4><p>The basic pattern is best illustrated with an example.  For example, the move of <code>UITestCaseSWT</code> from it&#8217;s legacy home in the <code>junit.extensions</code> package to its new home is accomplished with this implementation of <code>junit.extensions.UITestCaseSWT</code>:</p><pre><code>/**
 * ...
 * @deprecated prefer {@link com.windowtester.runtime.swt.UITestCaseSWT}
 */
public class UITestCaseSWT extends com.windowtester.runtime.swt.UITestCaseSWT {		
	public UITestCaseSWT() { super(); }
	public UITestCaseSWT(String testName){ super(testName); }
	...
}
</code></pre><p></p><h3 id="Phase3APIBaseline">Phase 3: API Baseline</h3><p>To aid (internally) in ensuring there are no API breakages in the migration, an API baseline will be setup using the <a href="http://www.eclipse.org/pde/pde-api-tools/">PDE API tooling</a>.</p><h3 id="Phase4LegacyCompatibilityBundles">Phase 4: Legacy Compatibility Bundles</h3><p>The following new bundles are defined to house migrated features.  </p><ul><li><code>com.windowtester.runtime.legacy</code> for <code>com.windowtester.runtime</code> features</li><li><code>com.windowtester.swt.runtime.legacy</code> for <code>com.windowtester.swt.runtime</code> features</li></ul><p>These bundles will ship with initially ship with the product.  Eventually, they will be provisioned as a separate (optional) feature.</p><h3 id="Phase5Migration">Phase 5: Migration</h3><p>A summary of migrated resources is contained in a separation <a href="Legacy_Bundles.html">legacy bundles</a> document.</p><h3 id="MakingtheMoveEasier">Making the Move Easier</h3><p>In many cases, this transition will not affect the user and will be completely transparent.  Otherwise there are a few scenarios.</p><h4 id="Option1RefactortoUsePreferredClasses">Option 1: Refactor to Use Preferred Classes</h4><p>In case you are using a deprecated class that has a preferred (API) version, update the reference to import the preferred version.  For example, if you are extending <code>junit.extensions.UITestCaseSWT</code>, change your class to extend <code>com.windowtester.runtime.swt.UITestCaseSWT</code> instead (as recommended in the javadocs). </p><p><strong>Note:</strong> if a class you depend on has been deprecated and no preferred class is specified, please contact us so that we can provide API to suit your needs.</p><h4 id="Option2AddLegacyBundleDependencies">Option 2: Add Legacy Bundle Dependencies</h4><p>If refactoring is infeasible, you can add a dependency on the com.windowtester.runtime.legacy and/or com.windowtester.swt.runtime.legacy bundles as needed.</p><h3 id="Timeline">Timeline</h3><table><tr><td style="background:#ddd"> 5.0.0  (March 2010)</td></tr><tr><td>Legacy API removal and migration with supporting tooling</td></tr><tr><td style="background:#ddd"> 3.7.0 (January 2009)</td></tr><tr><td>Complete legacy API Deprecation</td></tr><tr><td>Migration of legacy API SWT Conditions</td></tr><tr><td>Migration of (internal) legacy SWT Selectors and Matchers</td></tr></table></body></html>